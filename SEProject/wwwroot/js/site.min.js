function Stage(n){function u(){let n=[];while(n.length<=FINAL)n.push(!1);return n}let t=n,i=n,r=u();this.getCurrentStage=function(){return t};this.getPreviousStage=function(){return i};this.isCompleted=function(n){return r[n]};this.setStage=function(n,r){i=n;t=r};this.markStageCompleted=function(n){r[n]=!0;n>FORMS&&$(".list-group-item:nth-child("+n+")").append("<i class='glyphicon glyphicon-ok pull-right'><\/i>");n===FINAL&&$(".list-group-item:nth-child("+(n+1)+")").append("<i class='glyphicon glyphicon-ok pull-right'><\/i>")}}function InputValidator(){function t(){$("#polyInputError").text("*Please enter a valid polynomial expression");$("#polyInput").val("")}function i(){$("#polyInputError").text("*No rational roots exist.  Please try again.");$("#polyInput").val("")}function r(){$("#polyInputError").text("*Please limit input to below the 10th degree.");$("#polyInput").val("")}function u(){let n=$("#polyInput").val(),t=f(n);return t?n:!1}function f(n){let t=removeWhiteSpace(n),i=!1;try{let n=math.parse(t);console.log("PARSED: "+n);console.log("INPUT:  "+t);console.log("REGEX:  "+REGEX.test(t));REGEX.test(t)||(i=!0)}catch(r){console.log(r)}return i}function e(t){let i=!1;try{let s=math.simplify(math.parse(t)).toString();console.log("INITIAL PARSE:  "+s);let h=combineLikeTerms(s),r=toMatrix(h),f=FloPoly.degree(r);if(console.log("THIS IS THE DEGREE OF POLYMATRIX:  "+f),f>=10)return{invalidDegree:!0,hasRoot:i};let u=FloPoly.allRoots(r),e=u.length,o=FloPoly.evaluateAt0(r);console.log("POLYMATRIX:  "+r);console.log("ALL ROOTS:  "+u);console.log("TEST LENGTH:  "+e);console.log("TEST 0 EVAL:  "+o);f>3&&(e>0||o==0)||n(u)?i=!0:(e>0||o==0||n(u))&&(i=!0)}catch(r){console.log(r)}return{invalidDegree:!1,hasRoots:i}}function n(n){let i,r,t=0;const u=1e-12;return n.forEach(function(n){!Number.isInteger(n)&&o(n)>=12?(r=Math.round10(n,-1),i=Math.abs(n-r),console.log("#####THE ROOT#####"+n),console.log("-----ROUNDED------"+r),console.log("*******ERROR******"+i),i<u&&(t+=1),console.log(" .... AND NOW THE RATIONAL ROOT COUNT"+t)):t+=1}),t>0?!0:!1}function o(n){let t=n.toString();return(t.split(".")[1]||[]).length}this.validate=function(){let f=u(),o=!1,n;return f?(n=e(f),console.log("HASROOTS:  "+n.hasRoots),console.log("INVALID DEGREE "+n.invalidDegree),n.invalidDegree?r():n.hasRoots?o=!0:i()):t(),o}}function RecognizableFormsDisplay(n,t){function u(n,t,u,f){$(".forms-content").append('<p class="p-items">We can pull out the following special forms:<\/p >');i(n,t,u);$(".forms-content").append('<p class="p-items">We can also also reduce the polynomial and pull out the following factors:<\/p >');r(f)}function f(n,t,r){$(".forms-content").append('<p class="p-items">We can pull out the following special forms:<\/p >');i(n,t,r)}function e(n){$(".forms-content").append('<p class="p-items">We cannot pull out any special forms.  However, we can reduce the polynomial and pull out the following factors:  <\/p >');r(n)}function o(n){$(".forms-content").append('<p class="p-items">We cannot pull out any special forms.  However, we can simplify the polynomial to a reduced form.<\/p >');$(".forms-content").append("\\["+n+"\\]")}function s(){$(".forms-content").append('<p class="p-items">We cannot pull out any special forms, nor can we reduce the polynomial through factoring. <\/p >')}function h(){$(".forms-content").append('<p class="p-items">The polynomial has been reduced to its lowest form.  No further stages are necessary. <a href="/Index"> Click here<\/a> to enter another polynomial. <\/p > ');$("#FORMS-to-RZT").addClass("hidden")}function i(n,t,i){n.length>0&&$(".forms-content").append("\\["+n+"\\]");t.length>0&&$(".forms-content").append("\\["+t+"\\]");i.length>0&&$(".forms-content").append("\\["+i+"\\]")}function r(n){$(".forms-content").append("\\["+n+"\\]")}function c(n){$(".forms-content").append('<p class="p-items">In this case, the polynomial contains a pair of complex roots in the following expression: <\/p >\\['+n+"\\]")}function l(n,t){$(".forms-content").append('<p class="p-items">The polynomial has now been reduced to the following form:<\/p >\\['+n+'\\] <p class="p-items"> The following roots were discovered:<\/p >\\['+t+"\\]")}function a(){$(".forms-content").append('<p class="p-items">The polynomial must be analyzed through other means in order to reduced it further.')}this.display=function(){displayAsBlock(n,$("#forms-init-poly"));let v=t.getFactors(),y=t.getSumCubesTotal(),p=t.getDifCubesTotal(),w=t.getDifSquaresTotal(),g=t.getIrrationalOrComplexTerms(),nt=t.getComplexRootCount(),tt=t.getFinalRoots(),r=t.getReduced(),b=t.getHasForms(),k=t.getHasFactors(),i=!1,d=!1;b&&k?(u(w,p,y,v),i=!0):b?(f(w,p,y),i=!0):k?(e(v),i=!0):t.wasOnlyReduced()?(o(r),d=!0):s();nt>0&&(c(g),i=!0);i&&r?l(r,tt):d&&r||(i&&!r?h():a());setTimeout(function(){MathJax.Hub.Queue(["Typeset",MathJax.Hub,"forms-init-poly, forms-content"])},50)}}function RecognizableForms(n){function ct(n){let t;return t=vt(n),b=t[1],console.log("AFTER CHECK MULTIPLICATIVE ---------------->"+t),t=b?math.parse(t[0]).toString():t[0],console.log(" THIS IS @ THE END OF FORMS_SIMPLIFY ---------------->"+t),t}function lt(n){let t=[],i=!1;console.log("THIS HERE IS THE EXPR in hasParens:  "+n);for(let r=0;r<n.length;++r)t.push(n[r]),t[t.length-1]===")"&&(i=!0);return i}function at(){return it()||rt()||h!=0||l===removeWhiteSpace(c)?!1:!0}function vt(n){let u,i=[],t=[],y=0,l="",h=!1,a=!1,c=!1,s=[],r="",e="",o=0,f=0,v=/[+-]/;u=removeWhiteSpace(n);for(let n=0;n<u.length;++n){if(o===0&&f===0&&(h=!1),!h&&(t.push(u[n]),t[t.length-1]==="("&&(h=!0,t.pop(),t.length>0&&(e=t.join(""),e=e.substring(y,t.length),l+=e,y=t.length)),t.length>1&&v.test(t[t.length-1])&&t[t.length-2]!=="("||t.length===1&&v.test(t[0])))return e=removeWhiteSpace(combineLikeTerms(u)),e=removeWhiteSpace(Algebrite.simplify(e).toString()),[e,!1];if(h&&(i.push(u[n]),console.log("WELL, here's the stack...  "+i),i[i.length-1]==="("&&(o+=1),i[i.length-1]===")")){f+=1;u[n+1]!==null&&u[n+2]!==null&&u[n+1]==="^"&&(s.push(u[n+2]),s.push(u[n+1]),n+=2);s.push(i.pop());for(let n=i.length-1;f>0;n--)i[n]==="("?(f<=o&&(o-=1),f-=1):i[n]===")"?(f<o&&(o+=1),f+=1):v.test(i[n])&&f===1&&i[n-1]!=="("&&(c=!0),f===o&&(a=!0),s.push(i.pop());r=s.reverse().join("");console.log("THIS IS --------------> THE EXPRESSION IN MULTIPLICATIVE:  "+r);console.log("FOLLOWED by:  needsSimplifying:  "+c);console.log("Also THE GLOBAL stack:"+t);console.log("Right paren: "+f+".. and left paren:  "+o);c&&(r=removeWhiteSpace(r),r=sanitizeInput(r),r=Algebrite.simplify(r).toString(),r="("+r+")");a&&(l+=r);for(let n=0;n<r.length;++n)i.push(r[n]);c=!1;a=!1;s=[]}}return[l,!0]}function yt(n){let t=d(n,!1,1,!0);return k(u),k(i),k(r),console.log("********************************************************"),console.log("ALL EXPRESSIONS EXTRACTED:  "+t),console.log("***TIME TO SEE HOW WE DID. LET'S SEE THE RESULTS NOW:***"),console.log("DIF_SQUARES: --->  "+u),console.log("SUM_CUBES:   --->  "+i),console.log("DIF_CUBES:   --->  "+r),console.log("FACTORS:     --->  "+e),console.log("IRRATIONAL OR COMPLEX: --->  "+o),console.log("...AND THE COMPLEX COUNT: --->"+h),console.log("**************AND FOR THE EASE OF DISPLAY***************"),console.log("DIF_SQUARES TOTAL DISPLAY: --->  "+p),console.log("SUM_CUBES TOTAL DISPLAY:   --->  "+v),console.log("DIF_CUBES TOTAL DISPLAY:   --->  "+y),console.log("********************************************************"),it()}function it(){return u.length>0||r.length>0||i.length>0?!0:!1}function rt(){return e.length>0?!0:!1}function k(n){let t,i,r;n.forEach(function(n){t=toMatrix(prepareForMatrix(n));i=FloPoly.allRoots(t);r=FloPoly.degree(t);i.length>0&&i.forEach(function(n){s.push(n)})})}function pt(){let n=[];return e.length>0&&e.forEach(function(t){n.push(t)}),u.length>0&&u.forEach(function(t){n.push(t)}),r.length>0&&r.forEach(function(t){n.push(t)}),i.length>0&&i.forEach(function(t){n.push(t)}),o.length>0&&o.forEach(function(t){n.push(t)}),n}function ut(n){let e=bt(n),o=dt(n),s=kt(n),h=!1,f,c,l,t;return((e||o||s)&&(h=!0),c=toMatrix(prepareForMatrix(n)),l=FloPoly.degree(c),console.log(" THIS IS THE EXPRESSION THAT WAS CHECKED FOR SPECIAL FORMS:  -->"+n),h||b||l<=2?(f=Algebrite.factor(n).toString(),console.log(" THIS IS AFTER the EXPRESSION HAS BEEN FACTORED --->"+f)):f=Algebrite.simplify(n).toString(),e)?(p.push(f),t=g(f),t.factors.forEach(function(n){u.push(n)}),console.log("DIF_SQUARES: --->  "+u),{parse:t.parse,isReduced:!0,preFactor:t.pre}):o?(v.push(f),t=g(f),t.factors.forEach(function(n){i.push(n)}),console.log("SUM_CUBES:   --->  "+i),{parse:t.parse,isReduced:!0,preFactor:t.pre}):s?(y.push(f),t=g(f),t.factors.forEach(function(n){r.push(n)}),console.log("DIF_CUBES:   --->  "+r),{parse:t.parse,isReduced:!0,preFactor:t.pre}):{parse:f,isReduced:!1,preFactor:!1}}function bt(n){console.log("IN DIFFERENCE SQUARES:  "+n);let t=toMatrix(prepareForMatrix(n)),i=t.length-1,r=t[0],u=t[i];if(r>0&&u>0||r<0&&u<0)return!1;t=ot(t);console.log("DIF SQUARES MATRIX:  "+t);for(let n=0;n<t.length;++n)if(t.length===1||t.length%2==0){console.log("NOT SQUARE! LENGTH, IN 1");break}else if(n===0&&ht(t[n])){console.log("NOT SQUARE! LEADING, IN 2");break}else if(n===i&&ht(t[n])){console.log("NOT SQUARE! CONSTANT, IN 3");break}else if(n>0&&n<i&&t[n]!==0){console.log("NOT SQUARE! MIDDLE TERMS, IN 4");break}else{if(n===i)return console.log("MADE IT!!!"),!0;continue}return!1}function kt(n){console.log("IN DIFFERENCE CUBES:  "+n);let t=toMatrix(prepareForMatrix(n));return isDifCubes=et(t,"dif"),isDifCubes?!0:!1}function dt(n){console.log("IN SUM CUBES:  "+n);let t=toMatrix(prepareForMatrix(n));return isSumCubes=et(t,"sum"),isSumCubes?!0:!1}function ft(n){let t=removeWhiteSpace(n);console.log("IN FACTOR:  "+t);let r=toMatrix(prepareForMatrix(t)),u=FloPoly.allRoots(r),i=FloPoly.degree(r),f=gt(r),c=ni(u,i);if(i==0)return{expr:t,isFactor:!0};if(i==1)return e.push(t),s.push(u[0]),{expr:t,isFactor:!0};if(f){e.push(t);for(let n=0;n<i;++n)s.push(0);return{expr:t,isFactor:!0}}if(!f&&c){o.push(t);for(let n=0;n<i;++n)h+=1;return{expr:t,isFactor:!0}}return{expr:t,isFactor:!1}}function gt(n){let i=n.length,t=!0;if(i==1)t=!1;else for(let r=1;r<i;++r)n[r]!=0&&(t=!1);return t}function ni(n,t){return t==2&&(n.length==0||ti(n))?!0:!1}function ti(n){let r=!1,t,i;const u=1e-12;return n.forEach(function(n){!Number.isInteger(n)&&ii(n)>=12&&(i=Math.round10(n,-1),t=Math.abs(n-i),console.log("#####THE ROOT#####"+n),console.log("-----ROUNDED------"+i),console.log("*******ERROR******"+t),t>u&&(r=!0))}),r}function ii(n){let t=n.toString();return(t.split(".")[1]||[]).length}function et(n,t){let i=n.length-1,r=n[0],u=n[i];if(t==="sum"&&(r>0&&u<0||r<0&&u>0)||t==="dif"&&(r>0&&u>0||r<0&&u<0))return!1;n=ot(n);console.log("MATRIX in CUBE_PARSER:  (AFTER GCD HAS BEEN FOUND!) --->***"+n);for(let t=0;t<n.length;++t)if(n.length===1||i%3!=0){console.log("NOT CUBE! LENGTH, IN 1");break}else if(t===0&&st(n[t])){console.log("NOT CUBE, LEADING, IN 2");break}else if(t===i&&st(n[t])){console.log("NOT CUBE! CONSTANT, IN 3");break}else if(t>0&&t<i&&n[t]!==0){console.log("NOT CUBE! MIDDLE TERMS, IN 4");break}else{if(t===i)return console.log("MADE IT!!!"),!0;continue}return!1}function ri(){let n;if(f.length>0)if(f.forEach(function(n){n[1]===!1&&t.push(n[0])}),t.length>1){for(let n=0;n<t.length;++n)t[n]="("+t[n]+")";n=t.join("*");n=Algebrite.run(n).toString();console.log("FINAL REDUCED TERM:  "+n)}else n=t.length===1?t[0]:!1;return n}function ot(n){if(n.length===1)return!1;let t=n.length-1,r=n[0],u=n[t],i;for(let i=0;i<n.length;++i)if(i>0&&i<t&&n[i]!==0)return!1;return i=Algebrite.gcd(r,u),i>1&&(r<0?(n[0]=n[0]/-i,n[t]=n[t]/-i):(n[0]=n[0]/i,n[t]=n[t]/i)),n}function st(n){return n%Math.cbrt(n)!=0}function ht(n){return n=Math.abs(n),n%Math.sqrt(n)!=0}function d(n,t,i,r){console.log("EXPRESSION IN REDUCE:  "+n);let e=[],y=!0,c=[],o=[],l=0,u="",s="",h,a,v="";a=r?r:!0;n=removeWhiteSpace(n);n=trimMultSigns(n);for(let r=0;r<n.length;++r)if(e.push(n[r]),e[e.length-1]==="("&&(a=!1),a&&(l+=1),e[e.length-1]===")"){c.push(e.pop());for(let n=e.length-1;e[n]!=="(";n--)c.push(e.pop());c.push(e.pop());u=c.reverse().join("");try{console.log(" THIS IS THE PARSE:  "+u);u[u.length-3]!==null&&u[u.length-2]!==null&&u[u.length-3]==="^"?o.forEach(function(n){console.log("THIS IS THE TEMP TERM:  "+n[2]);console.log("THIS IS the EXP being used:  "+u[u.length-2]);n[2]*=u[u.length-2]}):(math.parse(u),console.log("****************INSIDE OF TRY-PARSE*************"),u=ut(u),t?o.push([u.parse,t,i,a]):o.push([u.parse,u.isReduced,i,a]))}catch(p){console.log(" ERROR PARSING IN PARENS:  =====>  "+p)}finally{y=!1;c=[]}}if(console.log("STACK : "+e),y)return u=ut(n),t?f.push([u.parse,t]):lt(u.parse)&&!u.isReduced?(console.log("BRANCH:  WHEN 'isReduced' is false and 'hasParens' is TRUE "),d(u.parse,!1,i,r)):(console.log("BRANCH:  WHEN 'isReduced' and 'hasParens' are false "),h=ft(u.parse),u.isReduced?f.push([u.parse,u.isReduced]):f.push([u.parse,h.isFactor])),f;if(e.length>0)try{s=trimMultSigns(e.join(""));s&&(r&&e[l]!==null&&e[l+1]!==null&&e[l]==="^"&&(console.log("********************INSIDE OF INITIAL PARSING*********"),v=parseInt(e[l+1]),o.forEach(function(n){console.log("THIS IS THE EXP:  "+v);console.log(" AND THIS IS THE TERM:  "+n[2]);n[2]*=v;n[3]=!1}),s=s.slice(0,-2)),console.log("ATTEMPTING TO PARSE LEFTOVER STACK STRING:  "+s),math.parse(s),h=ft(s),console.log("THIS MEANS THE LEFTOVER STACK STRING WAS PARSED. REDUCE FACTORS - > "+h.expr+"and "+h.isFactor),o.push([s,h.isFactor,i,r]))}catch(p){console.log("Unable to parse stack expression: "+p)}return console.log("TEMP TERMS in 'REDUCE':  "+o),o=ui(o),console.log("RENEWED TEMP TERMS:  "+o),o.forEach(function(n){d(n[0],n[1],n[2],n[3])}),f}function ui(n){let r=[],t,i,u;return n.forEach(function(n){t=removeWhiteSpace(n[0]);console.log("^^^^^^^^^^^^^^ ROLL CALLL^^^^^^^^^^^^^^^^^^");console.log("THIS SHOULD BE THE PAREN"+t[t.length-3]);console.log("THIS SHOULD BE THE CARET"+t[t.length-2]);console.log("THIS SHOULD BE THE EXPONENT"+t[t.length-1]);console.log("THIS SHOULD be the REGEX  "+/[0-9]/.test(t[t.length-1]));t[t.length-3]!==null&&t[t.length-2]!==null&&t[t.length-1]!==null&&t[t.length-3]===")"&&t[t.length-2]==="^"&&/[0-9]/.test(t[t.length-1])?(i=parseInt(t[t.length-1]),t=t.slice(0,-2)):i=1;u=n[2]*i;for(let i=0;i<u;++i)r.push([t,n[1],1,n[3]])}),r}function g(n){let r=n,t=[],u=[],i=[],f=[],e="",o="";r=removeWhiteSpace(r);r=trimMultSigns(r);for(let n=0;n<r.length;++n)if(t.push(r[n]),t[t.length-1]===")"){for(let n=t.length-1;t[n]!=="(";n--)u.push(t.pop());t.pop();u.splice(0,1);o=u.reverse().join("");i.push(o);u=[]}console.log("These are the TEMP TERMS IN  'grabFactor':  "+i);console.log("This is the STACK in 'grabFactor':  "+t);for(let n=0;n<i.length;++n)f[n]=i[n],i[n]="("+i[n]+")";let s=i.join("");return t.length>0?(e=t.join(""),{pre:e,factors:f,parse:s}):{pre:!1,factors:f,parse:s}}let l,a,e=[],i=[],v=[],r=[],y=[],u=[],p=[],f=[],t=[],o=[],h=0,s=[],w=[],c="",nt=!1,tt=!1,b;l=removeWhiteSpace(n);a=ct(n);nt=yt(a);tt=rt();c=ri();w=pt();console.log("#####################REDUCED_POLYNOMIAL#################"+c);console.log("*************************FINAL_ROOTS*********************"+s);console.log("************************FINAL_FACTORS*********************"+w);this.getInit=function(){return l};this.getPolynomial=function(){return a};this.getFactors=function(){return e};this.getSumCubes=function(){return i};this.getDifCubes=function(){return r};this.getDifSquares=function(){return u};this.getSumCubesTotal=function(){return v};this.getDifCubesTotal=function(){return y};this.getDifSquaresTotal=function(){return p};this.getAllTerms=function(){return f};this.getReducedTerms=function(){return t};this.getIrrationalOrComplexTerms=function(){return o};this.getComplexRootCount=function(){return h};this.getFinalRoots=function(){return s};this.getFinalFactors=function(){return w};this.getReduced=function(){return c};this.getHasForms=function(){return nt};this.getHasFactors=function(){return tt};this.wasOnlyReduced=function(){return at()}}function RationalZeroTestDisplay(n){function i(n,i){$("#rzt-p-over-q").append("\\[ {p\\over q} = {");t(n,$("#rzt-p-over-q"),!1);$("#rzt-p-over-q").append("\\over");t(i,$("#rzt-p-over-q"),!1);$("#rzt-p-over-q").append("}\\]")}function t(n,t,i){for(var r=0;r<n.length;++r)r===n.length-1?n[r]instanceof Fraction?t.append("\\pm"+n[r].toLatex()):t.append("\\pm"+n[r]):r!==0&&r%12==0&&i?n[r]instanceof Fraction?t.append("\\pm"+n[r].toLatex()+", \\\\"):t.append("\\pm"+n[r]+", \\\\"):n[r]instanceof Fraction?t.append("\\pm"+n[r].toLatex()+", "):t.append("\\pm"+n[r]+", ")}this.display=function(){i(n.getPValues(),n.getQValues());let r=$("#rzt-pq"),u=$("#rzt-pq-reduced");arraysAreEqual(n.getPositiveRoots(),n.getReducedPositiveRoots())?($("#skip-pq").addClass("hidden"),setOpeningBlockDelimeter(r),t(n.getReducedPositiveRoots(),r,!0),setClosingBlockDelimeter(r)):(setOpeningBlockDelimeter(r),setOpeningBlockDelimeter(u),t(n.getPositiveRoots(),r,!0),t(n.getReducedPositiveRoots(),u,!0),setClosingBlockDelimeter(r),setClosingBlockDelimeter(u));MathJax.Hub.Queue(["Typeset",MathJax.Hub,"rzt-p-over-q, rzt-pq, rzt-pq-reduced"])}}function RationalZeroTest(n){function s(){let t=r[r.length-1],n;return console.log("CONSTANT: "+t),n=o(t),console.log("MULTIPLES of P:  "+n),n}function h(){let t=r[0],n;return console.log("LEADING: "+t),n=o(t),console.log("MULTIPLES of Q:  "+n),n}function c(){let n=new Set,r=!1;t.length>0&&i.length>0&&t.forEach(function(t){i.forEach(function(i){t/i%1==0?n.add(t/i):(n.forEach(function(n){n instanceof Fraction&&n.equals(Fraction(t,i))&&(r=!0)}),r||n.add(Fraction(t,i)),r=!1)})});let u=Array.from(n);return u.sort(sortPos),u}function l(){let n=[];return t.length>0&&i.length>0&&t.forEach(function(t){i.forEach(function(i){t/i%1==0?n.push(t/i):n.push(Fraction(t,i))})}),n.sort(sortPos),n}function a(){let r=new Set,u=new Set,n=!1;t.length>0&&i.length>0&&t.forEach(function(t){i.forEach(function(i){t/i%1==0?(r.add(t/i),u.add(-(t/i))):(r.forEach(function(r){r instanceof Fraction&&r.equals(Fraction(t,i))&&(n=!0)}),n||r.add(Fraction(t,i)),n=!1,u.forEach(function(r){r instanceof Fraction&&r.equals(Fraction(-t,i))&&(n=!0)}),n||u.add(Fraction(-t,i)),n=!1)})});let f=Array.from(r),e=Array.from(u);return f.sort(sortPos),e.sort(sortNeg),{pos:f,neg:e}}function o(n){if(n=math.abs(n),n==1||n==0)return[n];if(math.isPrime(n))return[1,n];let t=2,i=[1],r=n/2;while(t<=r)n%t==0&&i.push(t),t++;return i.push(n),i}let r,t,i,u,f,e;r=toMatrix(prepareForMatrix(n));t=s();i=h();u=l();f=c();e=a();this.getPValues=function(){return t};this.getQValues=function(){return i};this.getPositiveRoots=function(){return u};this.getReducedPositiveRoots=function(){return f};this.getAllReducedRoots=function(){return e}}function DescartesDisplay(n){function i(n,t){n<2&&t.append("However, this doesn't apply in this case, as "+n+" has no lower multiples.")}function t(n,t,r,u,f,e){displayInline(f,n);i(f,t);r.append("\\[\\text{"+u+":  }"+e+"\\]")}this.display=function(){displayAsBlock(n.getPolynomial(),$("#descartes-poly-positive"));displayAsBlock(n.getNegPolynomial(),$("#descartes-poly-negative"));t($("#positive-sign-changes"),$("#no-positive"),$("#possible-positive-roots"),"Positive Roots",n.getPosSignChanges(),n.getPossiblePositives());t($("#negative-sign-changes"),$("#no-negative"),$("#possible-negative-roots"),"Negative Roots",n.getNegSignChanges(),n.getPossibleNegatives());MathJax.Hub.Queue(["Typeset",MathJax.Hub,"descartes-poly-positive,                                                descartes-poly-negative,                                                positive-sign-changes,                                                  negative-sign-changes,                                                  possible-positive-roots,                                                possible-negative-roots"])}}function Descartes(n){function h(n){let t=[];while(n>=0)t.push(n),n-=2;return t}function c(n){let t=n.length;if(t%2==0)for(let i=0;i<t;i+=2)n[i]=-n[i];else for(let i=1;i<t;i+=2)n[i]=-n[i];return n}let t,o,i,s,r,u,f,e;t=prepareForMatrix(n);o=toMatrix(t);i=c(toMatrix(t));s=toPolynomial(i);r=FloPoly.signChanges(o);u=FloPoly.signChanges(i);f=h(r);e=h(u);this.getPolynomial=function(){return t};this.getNegPolynomial=function(){return s};this.getPosSignChanges=function(){return r};this.getNegSignChanges=function(){return u};this.getPossiblePositives=function(){return f};this.getPossibleNegatives=function(){return e};this.getDescartes=function(){return{pos:f,neg:e}}}function SyntheticDivisionDisplay(n,t){function e(n){n.forEach(function(n){n.data("frac")?n.text("\\(\\cancel{"+n.data("frac")+"}\\)"):n.text("\\(\\cancel{"+n.data("root")+"}\\)")})}function h(n,t,i,r){i.text("\\[\\text{Pos. Root Count:  }"+n+"\\]");r.text("\\[\\text{Neg. Root Count:  }"+t+"\\]")}function f(n,t,i,r){if(h(n.getPosRootCount(),n.getNegRootCount(),$("#syn-total-pos"),$("#syn-total-neg")),w(),i){var u=[];u.push.apply(u,n.getRemainingIds());u.push.apply(u,n.getGuessedIds());e(u)}else e(n.getGuessedIds());let f=t.top.length-1,o=c(f);if(a(t,o,f),t.remainder==0&&i)$("#syn-summary").removeClass("hidden"),displayAsBlock(n.getRationalRoots(),$("#syn-rational-roots"));else if(t.remainder==0)$("#syn-found-root").removeClass("hidden");else if(r){let t=n.getPosRootCount()[0],i=n.getNegRootCount()[0];$("#syn-irrational").removeClass("hidden");l(t,i);t+i>2?($("#syn-failure").removeClass("hidden"),displayAsBlock("\\text{Rational roots discovered:  }"+n.getRationalRoots(),$("#syn-rational-roots")),$(".syn-early-end").addClass("hidden")):($(".syn-alt-summary").removeClass("hidden"),displayAsBlock(n.getRationalRoots(),$("#syn-rational-roots")),displayAsBlock(n.getIrrationalRoots(),$("#syn-irrational-roots")))}else $("#syn-no-root").removeClass("hidden");MathJax.Hub.Queue(["Typeset",MathJax.Hub,"syn-total-pos, syn-total-neg,syn-init-drawing, syn-2nd-drawing, syn-3rd-drawing, syn-final-drawing,syn-rational-roots, syn-irrational-roots, syn-quadratic"])}function c(n){let t="";while(n>=0)t+="r",n-=1;return t}function l(n,t){n>0&&t>0?$("#syn-irr-left").text(n+" positive and "+t+" negative "):n>0?$("#syn-irr-left").text(n+" positive "):$("#syn-irr-left").text(t+" negative ")}function i(n){let t="";for(let i=0;i<n.length;++i)t+=i===n.length-1?n[i]:n[i]+" & ";return t}function r(n){let t="";while(n>0)t+=" & ",n-=1;return t}function a(n,t,i){$(".syn-init-erasable").addClass("hidden");i===1?($(".syn-degree1-skippable").addClass("hidden"),$("#syn-degree1-handler").removeClass("hidden"),o(n,t,$("#syn-init-drawing")),s(n,t,$("#syn-2nd-drawing")),y(n,t,$("#syn-3rd-drawing"))):(o(n,t,$("#syn-init-drawing")),s(n,t,$("#syn-2nd-drawing")),v(n,t,$("#syn-3rd-drawing")),p(n,t,$("#syn-final-drawing")))}function o(n,t,f){console.log("POSITIONS:  "+t);console.log("TERMS:  "+i(n.top));let e=n.top.length-1,o;o=u(n.r);f.text("\\[\\begin{array} {c|"+t+"}"+o+"&"+i(n.top)+"\\\\             & \\downarrow"+r(e)+"\\\\             \\hline & \\color{red}{"+n.bottom[0]+"}"+r(e)+" \\end{array}\\]")}function s(n,t,f){let o=n.top.length-2,s=n.top.length-1,e;e=u(n.r);f.text("\\[\\begin{array} {c|"+t+"}"+e+"&"+i(n.top)+"\\\\             & & \\color{red}{"+n.middle[0]+"}"+r(o)+"\\\\             \\hline & "+n.bottom[0]+r(s)+" \\end{array}\\]")}function v(n,t,f){let e=n.top.length-2,o;o=u(n.r);f.text("\\[\\begin{array} {c|"+t+"}"+o+"&"+i(n.top)+"\\\\             & & "+n.middle[0]+r(e)+"\\\\             \\hline & "+n.bottom[0]+" & \\color{red}{"+n.bottom[1]+"}"+r(e)+"\\end{array}\\]")}function y(n,t,r){let f;f=u(n.r);r.text("\\[\\begin{array} {c|"+t+"}"+f+"&"+i(n.top)+"\\\\             & & "+n.middle[0]+"\\\\             \\hline & "+n.bottom[0]+" & \\color{red}{"+n.remainder+"}\\end{array}\\]")}function p(n,t,r){let f;f=u(n.r);r.text("\\[\\begin{array} {c|"+t+"}"+f+" & "+i(n.top)+"\\\\             \\ & & "+i(n.middle)+"\\\\             \\hline & "+i(n.bottom)+" & \\color{red}{"+n.remainder+"}\\end{array}\\]")}function w(){$("#syn-found-root, #syn-no-root").addClass("hidden");$(".syn-draw-content").removeClass("hidden")}function u(n){return n instanceof Fraction?n.toLatex():n}this.display=function(){f(n,t,!1,!1)};this.finalDisplay=function(){f(n,t,!0,!1)};this.alternateDisplay=function(){f(n,t,!1,!0)}}function SyntheticDivision(n,t,i){function d(n,t,i,r){n.length>0&&p(n,i,"Pos");t.length>0&&p(t,r,"Neg")}function p(n,t,i){displayInline(i+":",$(t));for(let u=0;u<n.length;++u)n[u]instanceof Fraction?$("<span>\\("+n[u].toLatex()+"\\)<\/span>").appendTo(t).attr({id:i+u,"class":"span-space","data-root":n[u],"data-frac":n[u].toLatex()}):$("<span>\\("+n[u]+"\\)<\/span>").appendTo(t).attr({id:i+u,"class":"span-space","data-root":n[u]}),r.push($("#"+i+u)),c+=r.length}function g(n,t,i,r){i.text("\\[\\text{Pos. Root Count:  }"+n+"\\]");r.text("\\[\\text{Neg. Root Count:  }"+t+"\\]");MathJax.Hub.Queue(["Typeset",MathJax.Hub,"syn-total-pos, syn-total-neg"])}function nt(){let t=[],n,r,i;return u.forEach(function(i){i.toString().indexOf("{")>-1?(n=i.toString(),n.indexOf("-")>-1?(r=n.indexOf("-"),corrected=n.slice(r+1,n.length),t.push("(x+"+corrected+")")):t.push("(x-"+n+")")):(n=-i,n>0?t.push("(x+"+n+")"):n<0?t.push("(x"+n+")"):t.push("(x)"))}),o.length>0&&o.forEach(function(r){i=Math.round10(r,-6);n=-i;n>0?t.push("(x+"+i+")"):t.push("(x"+i+")")}),t}function w(n){r.forEach(function(t){let d=t.data("root"),i=t.data("frac"),g,l,y=[],p=[],nt=function(){return new Promise(function(w){t.on("click.synth",function(){let nt,ft=!1;if(nt=i?k(n,Fraction(d)):k(n,d),nt.foundRoot?(i?u.push(i):u.push(nt.r),l=toPolynomial(nt.bottom),updateReduced(l),g=new RationalZeroTest(l),y=g.getAllReducedRoots(),nt.r>0?b(s):b(h),f=y.pos,console.log("THESE ARE THE POS ROOTS:  "+f),e=y.neg,console.log("THESE ARE THE NEG ROOTS"+e),p=f.concat(e),console.log("THESE ARE ALL OF THE ROOTS"+p),tt(p)):(a.push(t),r.splice(r.indexOf(t),1),c-=1),rt()){let n=ut(nt.top);o.push(n.pos);o.push(n.neg);new SyntheticDivisionDisplay(v,nt).alternateDisplay();ft=!0}else it()?(new SyntheticDivisionDisplay(v,nt).finalDisplay(),ft=!0):new SyntheticDivisionDisplay(v,nt).display();w({synDivResults:nt,$id:t,finished:ft})})})};nt().then(function(n){if(console.log("R:  "+n.synDivResults.r),console.log("TOP:  "+n.synDivResults.top),console.log("MIDDLE:  "+n.synDivResults.middle),console.log("REDUCED:  "+n.synDivResults.bottom),console.log("REMAINDER:  "+n.synDivResults.remainder),n.finished){$("span").off(".synth");$("#SYNTHETIC-to-FINAL").removeClass("hidden");return}if(n.synDivResults.foundRoot&&!n.finished){$("span").off(".synth");w(toPolynomial(n.synDivResults.bottom));return}n.$id.off(".synth")})})}function b(n){for(let t=0;t<n.length;++t)n[t]-=1,n[t]===-1&&n.pop()}function tt(n){let t=!1;for(let i=0;i<r.length;++i){for(let u=0;u<n.length;++u)console.log("CURRENT ROOT #### "+n[u]),n[u]==r[i].data("root")&&(t=!0);t||(a.push(r[i]),r.splice(i,1),c-=1);t=!1}}function it(){return c===0||u.length===l?!0:!1}function rt(){return r.length===0&&u.length<l?!0:!1}function k(n,t){let u=toMatrix(prepareForMatrix(n)),r=[],i=[],e=u.length-1,s=!1,f=t,o;if(f instanceof Fraction)for(let n=0;n<=e;++n)n===0?(i.push(Fraction(u[n])),r.push(f.mul(i[n]))):n==e?i.push(r[n-1].add(u[n])):(i.push(r[n-1].add(u[n])),r.push(f.mul(i[n])));else for(let n=0;n<=e;++n)n===0?(i.push(u[n]),r.push(i[n]*f)):n==e?i.push(u[n]+r[n-1]):(i.push(u[n]+r[n-1]),r.push(i[n]*f));if(f instanceof Fraction){for(let n=0;n<r.length;++n)r[n]=r[n].toLatex();for(let n=0;n<i.length;++n)i[n]=i[n].toLatex()}return o=i.pop(),o==0&&(s=!0),{polynomial:n,r:f,top:u,middle:r,bottom:i,remainder:o,foundRoot:s}}function ut(n){let i=n[0],t=n[1],r=n[2],u,f;return console.log("##################### A   "+i),console.log("##################### B   "+t),console.log("##################### C   "+r),u=(-t+Math.sqrt(t*t-4*i*r))/(2*i),f=(-t-Math.sqrt(t*t-4*i*r))/(2*i),{pos:u,neg:f}}function ft(){$("span").off(".synth");$(".syn-draw-content").addClass("hidden");$(".syn-reinit").addClass("hidden");$("#syn-degree1-handler").addClass("hidden");$(".syn-degree1-skippable").removeClass("hidden");$(".syn-init-erasable").removeClass("hidden");$(".syn-draw-erasable").empty()}let s=i.pos,h=i.neg,l=s[0]+h[0],f=t.pos,e=t.neg,o=[],u=[],a=[],r=[],c=0,y=n,v=this;ft();d(f,e,"#syn-pos-roots","#syn-neg-roots");g(s,h,$("#syn-total-pos"),$("#syn-total-neg"));w(y);this.getPosRootCount=function(){return s};this.getNegRootCount=function(){return h};this.getMaxRoots=function(){return l};this.getPosRoots=function(){return f};this.getNegRoots=function(){return e};this.getGuessedIds=function(){return a};this.getRemainingIds=function(){return r};this.getIrrationalRoots=function(){return o};this.getRationalRoots=function(){return u};this.getFactors=function(){return nt()};this.getPolynomial=function(){return y}}function displayAsBlock(n,t){t.append("\\[{"+n+"}\\]")}function displayInline(n,t){t.append("\\("+n+"\\)")}function setOpeningBlockDelimeter(n){n.append("\\[")}function setClosingBlockDelimeter(n){n.append("\\]")}function setOpeningInlineDelimeter(n){n.append("\\(")}function setClosingInlineDelimeter(n){n.append("\\)")}function changeDisplay(n,t){return changeActiveSection(n,t),changeHeading(t),displayStageContent(n,t),t}function displayStageContent(n,t){$(STAGE_CONTENT[n]).addClass("hidden");$(STAGE_CONTENT[t]).removeClass("hidden")}function changeActiveSection(n,t){$(".list-group-item:nth-child("+(n+1)+")").removeClass("active");$(".list-group-item:nth-child("+(t+1)+")").addClass("active")}function changeHeading(n){let t=selectStageHeading(n);$("h3").empty();$("h3").text(t);$("h3").prepend("<i class='glyphicon glyphicon-education'><\/i>")}function selectStageHeading(n){switch(n){case FORMS:return"Recognizable Forms";case RZT:return"Rational Zero Test";case DESCARTES:return"Descartes' Rule of Signs";case SYNTHETIC:return"Synthetic Division";case FINAL:return"Final";default:return""}}function finalClickHandler(n,t,i,r,u,f){console.log("THE CURRIED ROOTS: "+u);console.log("THE CURRIED FACTORS:  "+f);$("#SYNTHETIC-to-FINAL").off("click");$("#SYNTHETIC-to-FINAL").on("click",function(){if(i.isCompleted(FINAL))i.setStage(i.getCurrentStage(),changeDisplay(i.getCurrentStage(),FINAL));else{let n=u.concat(t.getRationalRoots()),e=f.concat(t.getFactors()).join("");if(t.getIrrationalRoots().length>0)for(let i=0;i<t.getIrrationalRoots().length;++i)n.push(Math.round10(t.getIrrationalRoots()[i],-6));displayAsBlock(r,$("#final-poly"));displayAsBlock(e,$("#final-factors"));displayAsBlock(n,$("#final-roots"));i.markStageCompleted(FINAL);i.setStage(i.getCurrentStage(),changeDisplay(i.getCurrentStage(),FINAL));MathJax.Hub.Queue(["Typeset",MathJax.Hub,"final-poly,final-factors, final-roots"])}})}function arraysAreEqual(n,t){if(n===t)return!0;if(n==null||t==null||n.length!=t.length)return!1;n.sort();t.sort();for(var i=0;i<n.length;++i)if(n[i]!=t[i])return!1;return!0}function toMatrix(n){let i=[],r=Algebrite.deg(n);console.log("DEGREE:"+r);for(var t=r;t>=0;--t)i.push(parseInt(Algebrite.coeff(n,t).toString()));return i}function toPolynomial(n){let u=n.length,i=[],r;for(var t=u-1;t>=0;--t)i.push(n[t]);return r=new Polynomial(i),r.toString()}function removeWhiteSpace(n){return n.split(" ").join("")}function removeMultSigns(n){return n.split("*").join("")}function trimMultSigns(n){return n=removeWhiteSpace(n),n[n.length-1]==="*"&&(n=n.slice(0,-1)),n[0]==="*"&&(n=n.slice(1)),n}function sanitizeInput(n){n=removeWhiteSpace(n);let i="",u=/[xX]/,f=/[0-9]/,o=/[+]/,s=/[-]/,e=/\(/,h=/\)/,r="",t="";for(let c=0;c<n.length-1;++c)r=n[c],t=n[c+1],i+=r,u.test(r)?(f.test(t)||e.test(t))&&(i+="*"):f.test(r)?(u.test(t)||e.test(t))&&(i+="*"):h.test(r)?(u.test(t)||f.test(t)||e.test(t))&&(i+="*"):o.test(r)&&s.test(t)&&(i=i.slice(0,-1));return i+=n[n.length-1]}function prepareForMatrix(n){try{let t=math.parse(n).toString();return combineLikeTerms(t)}catch(t){console.log("*ERROR* - cannot parse for matrix:  "+t)}}function combineLikeTerms(n){let r=removeWhiteSpace(n),t=sanitizeInput(r);console.log("CORRECTED IN PREP: "+t);let i=Algebrite.run(t).toString();return console.log("EXPANDED IN PREP: "+i),i}function updateReduced(n){let t=toMatrix(prepareForMatrix(n)),i=FloPoly.degree(t);i>0?$("#panel-reduced").text("$"+n+"$"):($("#panel-reduced").text("FINISHED"),$("#panel-reduced").append("<i class='glyphicon glyphicon-ok pull-right'><\/i>"))}function sortPos(n,t){return n-t}function sortNeg(n,t){return t-n}const REGEX=/[^0-9x^()+*/-]/,FORMS=0,RZT=1,DESCARTES=2,SYNTHETIC=3,FINAL=4,STAGE_CONTENT=[".recognizable-forms-content",".rational-zero-content",".descartes-content",".synthetic-content",".final-content"];Polynomial.setField("Q");var main=function(){"use strict";$("form").on("submit",function(){return(new InputValidator).validate()});if(top.location.pathname==="/Tutorial"){let i,t,u,f,e,o;i=$("#initialBackendPolyString").data("poly");let r=new RecognizableForms(i),n=new Stage(FORMS);new RecognizableFormsDisplay(i,r).display();t=r.getReduced();t&&(u=r.getFinalRoots(),f=r.getFinalFactors(),n.markStageCompleted(FORMS),changeDisplay(n.getCurrentStage(),FORMS),updateReduced(t),console.log("CURRIED ROOTS:  "+u),console.log("CURRIED FACTORS:  "+f));$("#FORMS-tab").on("click",function(){n.isCompleted(RZT)&&n.setStage(n.getCurrentStage(),changeDisplay(n.getCurrentStage(),FORMS))});$("#FORMS-to-RZT").on("click",function(){if(n.isCompleted(RZT))n.setStage(n.getCurrentStage(),changeDisplay(n.getCurrentStage(),RZT));else{var i=new RationalZeroTest(t);new RationalZeroTestDisplay(i).display();n.markStageCompleted(RZT);n.setStage(n.getCurrentStage(),changeDisplay(n.getCurrentStage(),RZT));e=i.getAllReducedRoots()}});$("#RZT-tab").on("click",function(){n.isCompleted(DESCARTES)&&n.setStage(n.getCurrentStage(),changeDisplay(n.getCurrentStage(),RZT))});$("#RZT-to-DESCARTES").on("click",function(){if(n.isCompleted(DESCARTES))n.setStage(n.getCurrentStage(),changeDisplay(n.getCurrentStage(),DESCARTES));else{var i=new Descartes(t);new DescartesDisplay(i).display();n.markStageCompleted(DESCARTES);n.setStage(n.getCurrentStage(),changeDisplay(n.getCurrentStage(),DESCARTES));o=i.getDescartes()}});$("#DESCARTES-tab").on("click",function(){n.isCompleted(SYNTHETIC)&&n.setStage(n.getCurrentStage(),changeDisplay(n.getCurrentStage(),DESCARTES))});$("#DESCARTES-to-SYNTHETIC").on("click",function(){if(n.isCompleted(SYNTHETIC))n.setStage(n.getCurrentStage(),changeDisplay(n.getCurrentStage(),SYNTHETIC));else{let r=new SyntheticDivision(t,e,o);n.markStageCompleted(SYNTHETIC);n.setStage(n.getCurrentStage(),changeDisplay(n.getCurrentStage(),SYNTHETIC));finalClickHandler(t,r,n,i,u,f)}});$("#SYNTHETIC-tab").on("click",function(){n.isCompleted(FINAL)&&n.setStage(n.getCurrentStage(),changeDisplay(n.getCurrentStage(),SYNTHETIC))});$("#FINAL-tab").on("click",function(){n.isCompleted(FINAL)&&n.setStage(n.getCurrentStage(),changeDisplay(n.getCurrentStage(),FINAL))})}};(function(){function n(t,i,r){return typeof r=="undefined"||+r==0?Math[t](i):(i=+i,r=+r,i===null||isNaN(i)||!(typeof r=="number"&&r%1==0))?NaN:i<0?-n(t,-i,r):(i=i.toString().split("e"),i=Math[t](+(i[0]+"e"+(i[1]?+i[1]-r:-r))),i=i.toString().split("e"),+(i[0]+"e"+(i[1]?+i[1]+r:r)))}Math.round10||(Math.round10=function(t,i){return n("round",t,i)});Math.floor10||(Math.floor10=function(t,i){return n("floor",t,i)});Math.ceil10||(Math.ceil10=function(t,i){return n("ceil",t,i)})})();$(document).ready(main);